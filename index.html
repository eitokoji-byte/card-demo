<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>メッセージカード作成</title>
  <link rel="stylesheet" href="./style.css" />

  <!-- Google Fonts 最適化 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- 4フォントに統一：Noto Sans JP / Shippori Mincho / Zen Maru Gothic / Yomogi -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Shippori+Mincho:wght@400;700&family=Zen+Maru+Gothic:wght@400;700&family=Yomogi&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2? family=Noto+Sans+JP:wght@400;700
 &family=Shippori+Mincho:wght@400;700
 &family=Zen+Maru+Gothic:wght@400;700
 &family=Yomogi
 &display=swap".replace(/\s+/g,'') rel="stylesheet">
</head>
<body>
<div class="wrap grid">
  <!-- 左：設定UI -->
  <div class="sidebar">
    <h1>メッセージカード作成</h1>

    <!-- 写真アップロード -->
    <section class="card">
      <label>写真アップロード</label>
      <input id="file" type="file" accept="image/*;capture=camera" />
    </section>

    <!-- 背景テンプレ -->
    <section class="card">
      <label>背景テンプレート</label>
      <select id="tpl">
        <option value="A">クラシック</option>
        <option value="B">ナチュラル</option>
        <option value="C">ポップ</option>
      </select>
    </section>

    <!-- メッセージ -->
    <section class="card">
      <label>メッセージ</label>
      <textarea id="message" rows="3" placeholder="例：Happy Birthday!" style="width:100%"></textarea>
      <div class="actions">
        <!-- ※このプレビュー更新ボタンはツールバーにもあるので、ID重複に注意 -->
        <button id="btn-preview" class="secondary">メッセージ更新</button>
      </div>
    </section>

    <!-- 文字配置 -->
    <section class="card">
      <label>文字配置</label>
      <select id="layout">
        <option value="top">上</option>
        <option value="middle">中央</option>
        <option value="bottom" selected>下</option>
      </select>
    </section>

    <!-- フォント -->
    <section class="card">
      <label>フォント選択</label>
      <select id="font">
        <option value="gothic">ゴシック（Noto Sans）</option>
        <option value="mincho">明朝（Shippori）</option>
        <option value="maru">丸ゴ（Zen Maru）</option>
        <option value="hand">手書き風（Yomogi）</option>
      </select>
    </section>

    <section class="card">
      <label>文字サイズ</label><br>
      <input id="font-size" type="range" min="28" max="72" value="48" />
      <span id="font-size-val">48px</span>
    </section>

    <!-- 文字色 -->
    <section class="card">
      <label>文字色</label>
      <input id="font-color" type="color" value="#000000" />
    </section>

    <!-- 操作ボタン -->
    <div class="toolbar">
      <button id="btn-preview" class="secondary">プレビュー更新</button>
      <button id="btn-illustrate" class="secondary">イラスト化</button>
      <button id="btn-toggle-guides" class="ghost">ガイド表示</button>
      <button id="btn-decide" class="primary">決定（受注）</button>
      <span id="status"></span>
    </div>
  </div>

  <!-- 右：プレビュー -->
  <div class="preview">
    <section class="card">
      <label>プレビュー</label>
      <canvas id="c" width="1200" height="800"></canvas>
      <div class="actions">
        <button id="btn-dl" class="ghost">PNGを保存</button>
      </div>
    </section>
  </div>
</div>

<!-- 画面外ウォームアップ（初回FOIT/レイアウトズレ対策） -->
<p aria-hidden="true" style="position:absolute;left:-9999px;top:-9999px">
  <span style="font-family:'Noto Sans JP',sans-serif;">暖機Warmup</span>
  <span style="font-family:'Shippori Mincho',serif;">暖機Warmup</span>
  <span style="font-family:'Zen Maru Gothic',sans-serif;">暖機Warmup</span>
  <span style="font-family:'Yomogi',cursive;">暖機Warmup</span>
</p>

<script type="module" src="./main.js?v=2"></script>
</body>
</html>
